"use strict";function toggleInterval(a){void 0!==a&&(window.paused=a);var b=document.getElementById("slideshow-pause");window.paused?(switching=setInterval("toggleSlide(true)",interval),b.setAttribute("class","played")):(clearInterval(switching),b.setAttribute("class","paused")),window.paused=!window.paused}function toggleSlide(a){var b=document.getElementsByClassName(hideable),c=document.getElementById(slideNumber),d=getVisible(b);if(b[d].style.display="none",a)var e=next(d,b.length);else var e=prev(d,b.length);b[e].style.display="block";var f=document.getElementById("caption");f.innerHTML="<p>"+descriptions[e]+"</p>",transition&&transitionSlide(d,e),colorBulletPoints(e),c.innerHTML=e+1}function transitionSlide(a,b){setTimeout(function(){var c=document.getElementById(a).children[0],d=document.getElementById(b).children[0];c.setAttribute("class","tr"),d.setAttribute("class","tr opaque")},15)}function changeTransition(){transition=!transition,resetImageClass(transition)}function resetImageClass(a){for(var b,c=getTotalNbSlide(),d=0;c>d;++d)b=document.getElementById(d).children[0],a?b.setAttribute("class","tr"):b.removeAttribute("class")}function getVisible(a){for(var b=0;b<a.length;++b)if("block"===a[b].style.display)return b;return-1}function prev(a,b){return 0===a?b-1:a-1}function next(a,b){return a===b-1?0:a+1}function initSlideshow(){setSlideNumber(),setTotalSlide(),setBulletPoints()}function setSlideNumber(){var a=document.getElementsByClassName(hideable),b=document.getElementById(slideNumber);b.innerText=getVisible(a)+1}function getTotalNbSlide(){var a=document.getElementsByClassName(hideable);return a.length}function setTotalSlide(){var a=document.getElementById(totalSlide);a.innerText=getTotalNbSlide()}function setBulletPoints(){var a=document.getElementById("bulletPoints");a.innerHTML="";for(var b=getTotalNbSlide(),c=0;b>c;++c){var d=document.createElement("li"),e=document.createElement("a");a.appendChild(d),e.setAttribute("onClick","goToImage("+c+")"),e.setAttribute("id","point"+c),d.appendChild(e)}var f=document.getElementById("point0");f.style.background="#7CB17D"}function goToImage(a){var b=document.getElementsByClassName(hideable),c=document.getElementById(slideNumber),d=getVisible(b);b[d].style.display="none",b[a].style.display="block",transition&&transitionSlide(d,a),c.innerHTML=a+1,colorBulletPoints(a);var e=document.getElementById("caption");e.innerHTML="<p>"+descriptions[a]+"</p>"}function colorBulletPoints(a){for(var b=document.getElementById("point"+a),c=0;c<getTotalNbSlide();++c){var d=document.getElementById("point"+c);d.style.background="black"}b.style.background="#7CB17D"}function detectswipe(a,b){var c=new Object;c.sX=0,c.sY=0,c.eX=0,c.eY=0;var d=20,e=40,f=40,g=50,h="",i=document.getElementById(a);i.addEventListener("touchstart",function(a){var b=a.touches[0];c.sX=b.screenX,c.sY=b.screenY},!1),i.addEventListener("touchmove",function(a){a.preventDefault();var b=a.touches[0];c.eX=b.screenX,c.eY=b.screenY},!1),i.addEventListener("touchend",function(){(c.eX-d>c.sX||c.eX+d<c.sX)&&c.eY<c.sY+g&&c.sY>c.eY-g&&(h=c.eX>c.sX?"r":"l"),(c.eY-f>c.sY||c.eY+f<c.sY)&&c.eX<c.sX+e&&c.sX>c.eX-e&&(h=c.eY>c.sY?"d":"u"),""!=h&&"function"==typeof b&&b(a,h),h=""},!1)}function swipeListener(a,b){toggleSlide("l"===b?!0:!1)}function visibilityChange(){toggleInterval(window.paused)}var interval=3e3,switching,slideNumber="slideNumber",hideable="hideable",totalSlide="totalSlide",transition=!0,descriptions=[];window.paused=!0,document.addEventListener("DOMContentLoaded",function(){document.getElementById("slideshow-ul").innerHTML="";var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&(200==a.status||0==a.status)){var b=JSON.parse(a.responseText);for(var c in b){descriptions[c]=b[c].desc;var d=document.createElement("li");d.setAttribute("id",c),d.setAttribute("class","hideable");var e=document.createElement("img");if(e.setAttribute("src",b[c].src),0==c){d.setAttribute("style","display: block;");var f=document.getElementById("caption");f.innerHTML="<p>"+b[c].desc+"</p>",transition&&e.setAttribute("class","tr opaque")}else d.setAttribute("style","display: none;"),transition&&e.setAttribute("class","tr");d.appendChild(e);var g=document.getElementById("slideshow-ul");g.appendChild(d)}detectswipe("slideshow-ul",swipeListener),initSlideshow(),toggleInterval(),g=document.getElementById("slideshow-ul"),g.addEventListener("mouseover",function(){toggleInterval(!1)}),g.addEventListener("mouseout",function(){toggleInterval(!0)}),document.onkeydown=function(a){switch(a=a||window.event,a.which||a.keyCode){case 32:toggleInterval();break;case 37:toggleSlide(!1);break;case 39:toggleSlide(!0)}},document.addEventListener("visibilitychange",visibilityChange)}},a.open("GET","get-images.php",!0),a.send()});